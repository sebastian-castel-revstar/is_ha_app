Ticket 5: Create us-west-2 infrastructure for SageMaker endpoints (IAM, VPC, KMS, autoscaling)

Priority: High | Dependencies: None (can run in parallel with Ticket 3) | Assignee: AP Description: Create and verify infrastructure prerequisites in us-west-2 for hosting IS SageMaker endpoints: IAM roles, VPC/subnets/security groups, KMS keys, and autoscaling configuration. Current state:

· h-sagemaker-crossaccountrole exists (global IAM role) but needs policy review for multi-region

· NER model uses VPC config in us-east-1; equivalent VPC resources needed in us-west-2

· MRK KMS keys exist in both regions

· No autoscaling configured for IS endpoints in either region

Acceptance criteria:

· SageMaker execution role policies verified/updated for us-west-2 support

· VPC subnets and security groups identified/created in us-west-2 matching DS patterns

· KMS keys (MRKs) confirmed available for SageMaker encryption in us-west-2

· Autoscaling policies designed and ready to apply (if needed)

· Infrastructure documented and codified in Terraform

---

Questions part 1:

1.Where exactly in the repository should I add the Terraform code for us-west-2? Should I create a new folder for this region or use an existing module? I'm asking because I have previously only worked with CloudFormation in this repo.
2.For the h-sagemaker-crossaccountrole, should we update the existing global policy to include us-west-2 resources, or should I create a new region-specific policy?
3. Do we have specific target metrics for autoscaling? For example, should I use SageMakerVariantInvocationsPerInstance or focus on CPU/Memory utilization?
4. Could you provide the ARNs or Aliases of the MRK KMS keys for us-west-2 so I can reference them correctly in the code?

Questions part 2_

Scope: Are we only creating “prerequisite infrastructure” in us-west-2, or do you also want us to deploy at least one SageMaker endpoint there to validate end‑to‑end?
Environments/accounts: Which environments and AWS accounts does this apply to (dev/staging/prod)? Do we need separate VPC/subnets/SG per environment?
Network source of truth (“DS patterns”): What exact tags/naming should we use to find the correct private subnets and security groups in us-west-2?
Egress / private-only requirement: Must the endpoints be fully private (no NAT/internet)? If yes, which VPC endpoints are required (S3, ECR API/DKR, CloudWatch Logs, STS, KMS, Secrets Manager)?
Security group rules: What are the approved inbound/egress rules for SageMaker endpoints in this org?
KMS permissions ownership: Who owns the KMS key policy? Can we update key policies / create grants for the SageMaker role from IaC, or is that managed centrally?
Endpoint naming: Should endpoint and variant names in us-west-2 match us-east-1 exactly (including version suffixes like v47/v26), or will they be different per region?
Monitoring expectations: Do you expect CloudWatch alarms/monitors for endpoint errors and scaling, or is “autoscaling policies ready to apply” enough?
Risk/change management: If we modify h-sagemaker-crossaccountrole, what other systems depend on it, and what approval/review process do we need to follow?
IaC execution & ownership: Where should the IaC be deployed from (pipeline/tooling account), and who will run/apply it? If Terraform is used, where should state live (S3 backend + Dynamo lock), and who owns it?

Answers part 2:

The terraform repositories are under DAPM access only, i cannot change that for you. All terraform work will have to be done by DAPM, I will bring this up in standup today and maybe our team’s policy will change to accommodate
 
sagemaker crossaccount role needs new polices, we can attach a new policy document to this role specifically for us west 2 resources
 
3. Unsure, will check the architecture again

---

Thanks. Since I don’t have access to the Terraform repos, can you please confirm who in DAPM will implement this and the expected timeline? I can provide all required IDs/ARNs and a draft policy/spec.”
“For the new policy attachment to h-sagemaker-crossaccountrole: do you want me to draft the exact IAM policy JSON for us-west-2 (S3/ECR/KMS/Logs/VPC access)? Also, are there any org guardrails/approved managed policies we must use?”
“To complete the us-west-2 prereqs: can you share (or confirm the tagging standard to discover) the target VPC ID, private subnet IDs (multi-AZ), and the security group to use in us-west-2?”
“Can you provide the KMS MRK key alias/ARN in us-west-2 that SageMaker should use (or the standard alias name), and who owns the key policy/grants?”
“Autoscaling: while you re-check architecture, is it acceptable that we design it as parameterized TargetTracking on SageMakerVariantInvocationsPerInstance with configurable target/min/max (and revise once you confirm the metric)
 
---
PRS: https://gitlab.hyattdev.com/hyatt/DS/gen-ai/prs-app.git
